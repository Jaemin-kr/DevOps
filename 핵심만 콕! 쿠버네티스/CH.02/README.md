# Ch02. 쿠버네티스 소개

## 2.1 쿠버네티스란?

쿠버네티스란 도커를 통해 생성한 컨테이너를 관리하는 시스템이다.

사용자가 여러 장치들로 구성되어 있는 컴퓨터(CPU, MEM, I/O)를 물리적으로 제어하지 않고 윈도우나 리눅스를 통해 컴퓨터를 제어하는 것처럼 쿠버네티스는 다수의 컨테이너를 사용자가 쉽게 조작할 수 있게 돕는다.

쿠버네티스는 구글에서 만들어져 CNCF(Cloud Native Computing Foundation)에 기증하여 오픈소스로 관리되고 있다.

### 2.1.1 컨테이너 오케스트레이션?

<aside>
💡 orchestration(오케스트레이션)
- 오케스트레이션이란 컴퓨터 시스템과 소프트웨어(어플리케이션, 서비스)의 자동화된 구성, 관리, 조정을 의미한다. 관련도구에는 Ansible, Puppet, 테라폼, AWS CloudFormation이 있다.

</aside>

쿠버네티스가 컨테이너의 어떤 부분을 담당하는가?

- 실행 및 배포
- 이중화와 가용성 보장
- 수평확장 및 축소관리
- 스케줄링 담당
- 네트워크 설정 관리
- health 상태 모니터링
- 설정값 관리

### 2.1.2 데이터 센터의 운영체제 → 쿠버네티스

<aside>
💡 운영체제란 컴퓨터의 CPU, 메모리, 디스크, 네트워크 카드 등의 부품으로 이루어진 컴퓨터를 직접적인 물리제어 없이 사용자가 컴퓨터를 사용할 수 있게 해준다.
이처럼  쿠버네티스는 여러대의 서버를 연결하여 하나의 시스템처럼 동작하는 환경을 제공한다.

</aside>

데이터 센터(클러스터)

- 여러 컴퓨터의 집합
- 리소스컴퓨팅 자원의 군집

운영체제

- 하드웨어 추상화
- 프로세스 스케줄링
- 컴퓨팅 자원관리
- 사용자 인터페이스(UI)

## 2.2 쿠버네티스 기본 개념

쿠버네티스는 사용자가 개별노드에 직접 접속하지 않고 쿠버네티스라는 추상화된 계층을 통해 클러스터를 제어할 수 있는 하드웨어 추상화, 컨테이너 스케줄링, 자원할당과 같은 기능을 제공한다. 또한, 운영체제는 GUI를 통해 사용자가 손쉽게 컴퓨터를 제어하지만 쿠버네티스는 kubectl이라는 UI를 이용하여 쿠버네티스를 제어한다

### 2.2.1 애완동물 vs 가축

pet은 cattle과 달리 세심한 관리가 필요하다. 가축은 다수의 개체들을 한번에 이동시키거나 관리를 하지만 애완동물의 경우에는 하나하나 따로 관리가 필요하며 하나의 개체에 대해 신경을 더 많이 쓴다.

쿠버네티스가 서버를 바라보는 관점도 이와 같다. 쿠버네티스는 서버를 하나하나 따로 관리하는 것이 아닌 전체적인 시스템 측면에서 서버를 바라본다. 그렇기 때문에 기존의 웹서버, 메일서버, 모니터링 서버 등과 같이 서버의 이름을 구분하는 것이 아닌 Master와 Worker node로 서버를 구분할 뿐이다.

쿠버네티스는 서버가 죽는데 개의치 않는다. 컨테이너의 장점인 고립성으로 빠른시간내에 같은 역할을 부여한 컨테이너를 생성할 수 있기 때문이다. 쿠버네티스에서 마스터는 쿠버네티스 운용을 위한 필수적인 핵심 컴포넌트가 존재하고 나머지 워커 노드들은 단순히 컨테이너를 실행하는 환경으로만 사용한다.

→ 고립화와 이식성(워커노드를 각각 고립된 환경에서 동작하며 다른 워커노드가 한 일을 기존의 워크노드로도 실행이 가능하다.)

### 2.2.2 바라는 상태(Desired State)

에어컨 현재온도 → 희망온도

바라는 상태를 알고 있기 때문에 시스템에 장애가 발생하더라도 자가치유가 가능하다

### 2.2.3 컨트롤러

사용자가 바라는 상태를 선언하면 쿠버네티스는 바라는 상태를 유지하기 위해 동작하는데 이때 동작을 하는 주체가 컨트롤러이다. 컨트롤러는 control-loop라는 루프를돌며 특정 리소스를 지속적으로 모니터링 하다가 이벤트가 발생하면 이에 따라 특정 작업을 수행한다.

### 2.2.4 쿠버네티스 리소스

쿠버네티스는 모든 것이 리소스로 표현된다. Pod, ReplicaSet, Deployment 등의 다양한 리소스가 존재하고 역할이 있다. 가장 기본적인 리소스는 파드(Pod)로 하나 이상의 컨테이너를 가지는 쿠버네티스의 최소 실행 단위이다.

### 2.2.2 선언형 커맨드(Declarative Command)

<aside>
💡 선언형 커맨드
사용자가 직접 시스템의 상태를 바꾸지 않고 사용자가 바라는 상태를 기술하여 명령을 내리는 방법을 말함.

명령형(Imperative) 커맨드
ex) SQL 쿼리 - 특정 데이터에 대해 명령문 작성

</aside>

## 2.3 아키텍처

## 2.4 장점